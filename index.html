<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Rageo Rentals ‚Äî Verified Houses for Rent</title>
  <link rel="canonical" href="https://rageoproperties.com/">
  <style>
    :root{
      --accent:#007bff;
      --card-bg:#fff;
      --muted:#666;
      --max-width:1200px;
    }
    html,body{height:100%}
    body{font-family:Arial,system-ui; margin:0; padding:0; background:#fafafa; color:#222; display:flex; justify-content:center}
    .container{max-width:var(--max-width); width:100%; padding:18px;}
    header{display:flex;align-items:center;gap:12px;padding:12px 0}
    header img{height:56px}
    /* --- Hero Slideshow styles (integrated) --- */
    .hero-slideshow-wrapper { margin-bottom:16px; position:relative; border-radius:10px; overflow:hidden; box-shadow:0 2px 10px rgba(0,0,0,0.06); }
    .hero-slideshow { position:relative; height:360px; overflow:hidden; background:#333; }
    .hero-slideshow .slide {
      position:absolute;
      inset:0;
      background-size:cover;
      background-position:center;
      opacity:0;
      transition:opacity 1.2s ease-in-out;
    }
    .hero-slideshow .slide.active { opacity:1; }
    .hero-text {
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      color:white;
      text-align:center;
      z-index:2;
      text-shadow:0 2px 8px rgba(0,0,0,0.6);
      padding: 0 12px;
    }
    .hero-text h2{font-size:2rem;margin:0 0 6px}
    .hero-text p{margin:0;color:#f3f3f3}
    .hero-nav { position:absolute; left:12px; right:12px; bottom:12px; display:flex; justify-content:center; gap:8px; z-index:3; }
    .hero-dot { width:10px;height:10px;border-radius:50%;background:rgba(255,255,255,0.5);cursor:pointer; }
    .hero-dot.active { background:white; box-shadow:0 1px 4px rgba(0,0,0,0.3); }

    /* --- Controls and search/header --- */
    .controls{display:flex;justify-content:space-between;align-items:center;margin:12px 0;gap:12px}
    .search{flex:1}

    /* --- Grid and cards --- */
    .grid{display:grid;gap:16px;margin-top:12px;}
    @media (min-width: 0px){ .grid{grid-template-columns: 1fr;} }
    @media (min-width: 700px){ .grid{grid-template-columns: repeat(2, 1fr);} }
    @media (min-width: 1024px){ .grid{grid-template-columns: repeat(3, 1fr);} }

    .card{background:var(--card-bg);border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.06);display:flex;flex-direction:column}
    .card .media{width:100%;height:180px;overflow:hidden;background:#eee;display:flex;align-items:center;justify-content:center}
    .card .media img{width:100%;height:100%;object-fit:cover;display:block}
    .card .body{padding:10px;flex:1;display:flex;flex-direction:column}
    .card h3{margin:0 0 6px;font-size:1.05rem}
    .meta{color:var(--muted);font-size:0.9rem;margin-bottom:8px}
    .desc{color:#333;font-size:0.95rem;margin-top:auto}
    .card .foot{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .btn{background:var(--accent);color:white;padding:8px 12px;border-radius:6px;text-decoration:none;font-weight:700}
    .price{font-weight:800;color:#111}
    .desc-short{
      display:-webkit-box;
      -webkit-line-clamp:3;
      -webkit-box-orient:vertical;
      overflow:hidden;
    }

    .load-more{display:block;margin:20px auto;padding:10px 18px;border-radius:8px;background:#333;color:#fff;border:none;cursor:pointer}
    footer{margin:24px 0;color:var(--muted);text-align:center}

    /* small responsive tweaks */
    @media (max-width:420px){
      .hero-slideshow { height:260px; }
      .hero-text h2{font-size:1.4rem}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img src="/logo.jpg" alt="Rageo Rentals">
      <div>
        <div style="font-weight:700">Rageo Rentals</div>
        <div style="color:var(--muted);font-size:0.9rem">Verified houses for rent in Kenya</div>
      </div>
    </header>

    <!-- Integrated hero slideshow -->
    <div class="hero-slideshow-wrapper" aria-hidden="false">
      <section class="hero-slideshow" id="heroSlideshow" aria-label="Featured images">
        <div class="slide active" style="background-image:url('hero1.jpg');" role="img" aria-label="Featured property 1"></div>
        <div class="slide" style="background-image:url('hero2.jpg');" role="img" aria-label="Featured property 2"></div>
        <div class="slide" style="background-image:url('hero3.jpg');" role="img" aria-label="Featured property 3"></div>

        <div class="hero-text" role="presentation">
          <h2>Find Your Dream Home</h2>
          <p>Verified Rentals Across Kenya</p>
        </div>

        <div class="hero-nav" id="heroNav" aria-hidden="false">
          <div class="hero-dot active" data-index="0" aria-label="Slide 1"></div>
          <div class="hero-dot" data-index="1" aria-label="Slide 2"></div>
          <div class="hero-dot" data-index="2" aria-label="Slide 3"></div>
        </div>
      </section>
    </div>

    <div class="controls">
      <div class="search">
        <input id="searchInput" placeholder="Search by location or title" style="width:100%;padding:8px;border-radius:6px;border:1px solid #ddd">
      </div>
      <div style="margin-left:12px">
        <a class="btn" href="/add-listing.html">‚ûï Add Listing</a>
         <a class="btn" style="background:#0069d9" href="https://rageoproperties.co.ke" target="_blank">üåê Visit Main Site</a>
      </div>
    </div>

    <div id="listingsGrid" class="grid">
      <!-- cards get injected here -->
    </div>

    <button id="loadMoreBtn" class="load-more" style="display:none">Load more</button>

    <footer>¬© 2025 Rageo Properties</footer>
  </div>

  <script>
    // Hero slideshow simple logic
    (function(){
      const slideshow = document.getElementById('heroSlideshow');
      const slides = slideshow.querySelectorAll('.slide');
      const dots = document.getElementById('heroNav').querySelectorAll('.hero-dot');
      let index = 0;
      let timer = null;

      function show(n){
        slides.forEach((s,i)=> s.classList.toggle('active', i===n));
        dots.forEach((d,i)=> d.classList.toggle('active', i===n));
        index = n;
      }

      function next(){
        show((index+1) % slides.length);
      }

      // auto rotate
      timer = setInterval(next, 5000);

      // click dots
      dots.forEach(d => d.addEventListener('click', () => {
        clearInterval(timer);
        show(parseInt(d.dataset.index));
        timer = setInterval(next, 5000);
      }));
    })();
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import {
      getFirestore, collection, query, orderBy, limit, getDocs, startAfter
    } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBOoGvZDvzp-CHLVllJAujTdo84vxcz_hM",
      authDomain: "rageo-rentals.firebaseapp.com",
      projectId: "rageo-rentals"
    };
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Cloudinary helper
    function cloudThumb(url, w=800, h=600){
      if(!url) return url;
      return url.replace('/upload/','/upload/w_' + w + ',h_' + h + ',c_fill/');
    }

    // UI elements
    const listingsGrid = document.getElementById('listingsGrid');
    const loadMoreBtn = document.getElementById('loadMoreBtn');
    const searchInput = document.getElementById('searchInput');

    const PAGE_SIZE = 9;
    let lastDoc = null;
    let loading = false;

    function truncate(text, max = 140){
      if(!text) return '';
      if (text.length <= max) return text;
      const truncated = text.slice(0, max);
      return truncated.replace(/\s+\S*$/, '') + '‚Ä¶';
    }

    function escapeHtml(s){
      if(!s) return '';
      return s.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;').replaceAll("'",'&#039;');
    }

    function createCard(doc){
      const data = doc.data();
      const id = doc.id;
      const images = Array.isArray(data.images) ? data.images : (data.image ? [data.image] : []);
      const thumb = images[0] ? cloudThumb(images[0], 800, 600) : '/placeholder.jpg';

      const card = document.createElement('article');
      card.className = 'card';
      card.innerHTML = `
        <div class="media"><img src="${thumb}" alt="${escapeHtml(data.title||'Property')}" loading="lazy"></div>
        <div class="body">
          <h3>${escapeHtml(data.title || 'Untitled')}</h3>
          <div class="meta">${escapeHtml(data.location || '')}</div>
          <div class="desc desc-short">${escapeHtml(truncate(data.description || '', 140))}</div>
          <div class="foot">
            <div class="price">${escapeHtml(data.price || '')}</div>
            <a class="btn" href="/property.html?id=${id}" aria-label="View ${escapeHtml(data.title||'property')}">View</a>
          </div>
        </div>
      `;
      return card;
    }

    async function loadPage(isFirst = true){
      if(loading) return;
      loading = true;
      try {
        let q;
        if(isFirst){
          q = query(collection(db, 'listings'), orderBy('created','desc'), limit(PAGE_SIZE));
        } else {
          q = query(collection(db, 'listings'), orderBy('created','desc'), startAfter(lastDoc), limit(PAGE_SIZE));
        }
        const snap = await getDocs(q);
        if (snap.empty && isFirst) {
          listingsGrid.innerHTML = '<p style="grid-column:1/-1;color:var(--muted)">No properties available yet. Check back soon.</p>';
          loadMoreBtn.style.display = 'none';
          return;
        }
        if (!snap.empty) {
          lastDoc = snap.docs[snap.docs.length - 1];
          snap.forEach(doc => {
            const card = createCard(doc);
            listingsGrid.appendChild(card);
          });
        }

        if (snap.size === PAGE_SIZE) {
          loadMoreBtn.style.display = 'block';
        } else {
          loadMoreBtn.style.display = 'none';
        }
      } catch (err) {
        console.error('Load listings error', err);
        listingsGrid.innerHTML = '<p style="color:red">Failed to load listings. See console.</p>';
        loadMoreBtn.style.display = 'none';
      } finally {
        loading = false;
      }
    }

    // initial load
    loadPage(true);

    loadMoreBtn.addEventListener('click', () => loadPage(false));

    // client-side simple search filtering
    searchInput.addEventListener('input', (e) => {
      const q = e.target.value.trim().toLowerCase();
      const cards = listingsGrid.querySelectorAll('.card');
      cards.forEach(c => {
        const text = (c.querySelector('h3').textContent + ' ' + c.querySelector('.meta').textContent).toLowerCase();
        c.style.display = text.includes(q) ? '' : 'none';   
      });
    });
  </script>
</body>
</html>


















